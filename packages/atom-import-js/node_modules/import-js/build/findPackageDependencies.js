Object.defineProperty(exports, "__esModule", {
  value: true
});
exports['default'] = findPackageDependencies;

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _FileUtils = require('./FileUtils');

var _FileUtils2 = _interopRequireDefault(_FileUtils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

/**
 * Finds dependencies from package.json
 */
function findPackageDependencies(workingDirectory, includeDevDependencies) {
  const packageJson = _FileUtils2['default'].readJsonFile(_path2['default'].join(workingDirectory, 'package.json'));
  if (!packageJson) {
    return new Set([]);
  }

  const keys = ['dependencies', 'peerDependencies'];
  if (includeDevDependencies) {
    keys.push('devDependencies');
  }
  const result = new Set();
  keys.forEach(key => {
    if (Object.prototype.hasOwnProperty.call(packageJson, key)) {
      Object.keys(packageJson[key]).forEach(packageName => {
        result.add(packageName);
      });
    }
  });
  return result;
}
module.exports = exports['default'];